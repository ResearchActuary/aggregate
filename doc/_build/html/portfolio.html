<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Portfolio Class &mdash; aggregate 0.6.1 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="search" title="Search" href="search.html" >
    <link rel="top" title="aggregate 0.6.1 documentation" href="index.html" >
    <link rel="next" title="Distortion Class" href="distortion.html" >
    <link rel="prev" title="Distribution Classes" href="aggregate.html" > 
  </head>
  <body>

<div class="container">
  <div class="top-scipy-org-logo-header">
    <a href="index.html">
      <img style="border: 0;" alt="SciPy" src="_static/img/scipy_org_logo.gif"></a>
    </div>
  </div>
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="https://github.com/mynl/aggregate">aggregate Code</a></li>
	
        <li class="active"><a href="index.html">aggregate 0.6.1 documentation</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="distortion.html" title="Distortion Class"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="aggregate.html" title="Distribution Classes"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="module-aggregate.port">
<span id="portfolio-class"></span><h1>Portfolio Class<a class="headerlink" href="#module-aggregate.port" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>A Portfolio represents a collection of Aggregate objects. Applications include</p>
<ul class="simple">
<li>Model a book of insurance</li>
<li>Model a large account with several sub lines</li>
<li>Model a reinsurance portfolio or large treaty</li>
</ul>
<dl class="class">
<dt id="aggregate.port.Portfolio">
<em class="property">class </em><code class="descclassname">aggregate.port.</code><code class="descname">Portfolio</code><span class="sig-paren">(</span><em>name</em>, <em>spec_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Portfolio creates and manages a portfolio of Aggregate objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – the name of the portfolio, no spaces or underscores</li>
<li><strong>spec_list</strong> – a list of Aggregate object dictionary specifications</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="aggregate.port.Portfolio.analysis_collateral">
<code class="descname">analysis_collateral</code><span class="sig-paren">(</span><em>line</em>, <em>c</em>, <em>a</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.analysis_collateral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.analysis_collateral" title="Permalink to this definition">¶</a></dt>
<dd><p>E(C(a,c)) expected value of line against not line with collateral c and assets a, c &lt;= a</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>line</strong> – line of business with collateral, analyzed against not line</li>
<li><strong>c</strong> – collateral, c &lt;= a required; c=0 reproduces exa, c=a reproduces lev</li>
<li><strong>a</strong> – assets, assumed less than the max loss (i.e. within the square)</li>
<li><strong>debug</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.analysis_priority">
<code class="descname">analysis_priority</code><span class="sig-paren">(</span><em>asset_spec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.analysis_priority"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.analysis_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Create priority analysis report_ser.
Can be called multiple times with different <code class="docutils literal"><span class="pre">asset_specs</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>asset_spec</strong> – epd</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.apply_distortion">
<code class="descname">apply_distortion</code><span class="sig-paren">(</span><em>dist</em>, <em>axiter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.apply_distortion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.apply_distortion" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the distorion, make a copy of density_df and append various columns
Handy graphic of results</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dist</strong> – CDistortion</li>
<li><strong>axiter</strong> – axis iterator, if None no plots are returned</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">density_df with extra columns appended</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.apply_distortions">
<code class="descname">apply_distortions</code><span class="sig-paren">(</span><em>dist_dict</em>, <em>As=None</em>, <em>Ps=None</em>, <em>num_plots=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.apply_distortions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.apply_distortions" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a list of distortions, summarize pricing and produce graphical output
show loss values where  <span class="math">\(s_ub &gt; S(loss) &gt; s_lb\)</span> by jump</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dist_dict</strong> – dictionary of Distortion objects</li>
<li><strong>As</strong> – input asset levels to consider OR</li>
<li><strong>Ps</strong> – input probs (near 1) converted to assets using <code class="docutils literal"><span class="pre">self.q()</span></code></li>
<li><strong>num_plots</strong> – 0, 1 or 2</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.calibrate_distortion">
<code class="descname">calibrate_distortion</code><span class="sig-paren">(</span><em>name</em>, <em>r0=0.0</em>, <em>premium_target=0.0</em>, <em>roe=0.0</em>, <em>assets=0.0</em>, <em>p=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.calibrate_distortion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.calibrate_distortion" title="Permalink to this definition">¶</a></dt>
<dd><p>Find transform to hit a premium target given assets of <code class="docutils literal"><span class="pre">a</span></code>.
Fills in the values in <code class="docutils literal"><span class="pre">g_spec</span></code> and returns params and diagnostics…so
you can use it either way…more convenient</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – name of distortion</li>
<li><strong>r0</strong> – fixed parameter if applicable</li>
<li><strong>premium_target</strong> – target premium</li>
<li><strong>roe</strong> – or ROE</li>
<li><strong>assets</strong> – asset level</li>
<li><strong>p</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.calibrate_distortions">
<code class="descname">calibrate_distortions</code><span class="sig-paren">(</span><em>LRs=None</em>, <em>ROEs=None</em>, <em>As=None</em>, <em>Ps=None</em>, <em>r0=0.03</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.calibrate_distortions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.calibrate_distortions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate assets a to loss ratios LRs and asset levels As (iterables)
ro for LY, it <span class="math">\(ro/(1+ro)\)</span> corresponds to a minimum rate on line</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>LRs</strong> – LR or ROEs given</li>
<li><strong>ROEs</strong> – ROEs override LRs</li>
<li><strong>As</strong> – Assets or probs given</li>
<li><strong>Ps</strong> – probability levels for quantiles</li>
<li><strong>r0</strong> – for distortions that have a min ROL</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.collapse">
<code class="descname">collapse</code><span class="sig-paren">(</span><em>approx_type='slognorm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.collapse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.collapse" title="Permalink to this definition">¶</a></dt>
<dd><p>returns new Portfolio with the fit</p>
<p>deprecated…prefer uw(self.fit()) to go through the agg language approach</p>
<p>TODO: make a version returning an rv_histogram</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>approx_type</strong> – slognorm | sgamma</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.cumintegral">
<code class="descname">cumintegral</code><span class="sig-paren">(</span><em>v</em>, <em>bs_override=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.cumintegral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.cumintegral" title="Permalink to this definition">¶</a></dt>
<dd><p>cumulative integral of v with buckets size bs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bs_override</strong> – </li>
<li><strong>v</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>approx_type='slognorm'</em>, <em>output='agg'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a dictionary specification of the portfolio aggregate_project
if updated uses empirical moments, otherwise uses theoretic moments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>approx_type</strong> – slognorm | sgamma</li>
<li><strong>output</strong> – return a dict or agg language specification</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aggregate.port.Portfolio.from_DataFrame">
<em class="property">static </em><code class="descname">from_DataFrame</code><span class="sig-paren">(</span><em>name</em>, <em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.from_DataFrame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.from_DataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>create portfolio from pandas dataframe
uses columns with appropriate names</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – </li>
<li><strong>df</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aggregate.port.Portfolio.from_Excel">
<em class="property">static </em><code class="descname">from_Excel</code><span class="sig-paren">(</span><em>name</em>, <em>ffn</em>, <em>sheet_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.from_Excel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.from_Excel" title="Permalink to this definition">¶</a></dt>
<dd><p>read in from Excel</p>
<p>works via a Pandas dataframe; kwargs passed through to pd.read_excel
drops all blank columns (mostly for auditing purposes)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – </li>
<li><strong>ffn</strong> – full file name, including path</li>
<li><strong>sheet_name</strong> – </li>
<li><strong>kwargs</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.get_stat">
<code class="descname">get_stat</code><span class="sig-paren">(</span><em>line='total'</em>, <em>stat='EmpMean'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.get_stat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.get_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Other analysis suggests that iloc and iat are about same speed but slower than ix</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>line</strong> – </li>
<li><strong>stat</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.percentiles">
<code class="descname">percentiles</code><span class="sig-paren">(</span><em>pvalues=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.percentiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.percentiles" title="Permalink to this definition">¶</a></dt>
<dd><p>report_ser on percentiles and large losses
uses interpolation, audit_df uses nearest</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Pvalues:</th><td class="field-body">optional vector of log values to use. If None sensible defaults provided</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">DataFrame of percentiles indexed by line and log</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>kind='density'</em>, <em>line='all'</em>, <em>p=0.99</em>, <em>c=0</em>, <em>a=0</em>, <em>axiter=None</em>, <em>figsize=None</em>, <em>height=2</em>, <em>aspect=1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.plot" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>kind = density</dt>
<dd>simple plotting of line density or not line density;
input single line or list of lines;
log underscore appended as appropriate</dd>
<dt>kind = audit</dt>
<dd>Miscellaneous audit graphs</dd>
<dt>kind = priority</dt>
<dd>LEV EXA, E2Pri and combined plots by line</dd>
<dt>kind = quick</dt>
<dd>four bar charts of EL etc.</dd>
<dt>kind = collateral</dt>
<dd>plot to illustrate bivariate density of line vs not line with indicated asset a and capital c</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kind</strong> – density | audit | priority | quick | collateral</li>
<li><strong>line</strong> – lines to use, defaults to all</li>
<li><strong>p</strong> – for graphics audit controls loss scale</li>
<li><strong>c</strong> – collateral level</li>
<li><strong>a</strong> – asset level</li>
<li><strong>axiter</strong> – optional, pass in to use existing <code class="docutils literal"><span class="pre">axiter</span></code></li>
<li><strong>figsize</strong> – </li>
<li><strong>height</strong> – </li>
<li><strong>aspect</strong> – </li>
<li><strong>kwargs</strong> – passed to pandas plot routines</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.price">
<code class="descname">price</code><span class="sig-paren">(</span><em>reg_g</em>, <em>pricing_g=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.price"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.price" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Price using regulatory and pricing g functions</dt>
<dd><p class="first">Compute E_price (X wedge E_reg(X) ) where E_price uses the pricing distortion and E_reg uses
the regulatory distortion</p>
<p>regulatory capital distortion is applied on unlimited basis</p>
<p>reg_g is number; Distortion; spec { name = var|tvar|  ,  shape =log value in either case }
pricing_g is  { name = ph|wang and shape= or lr= or roe= }, if shape and lr or roe shape is
overwritten</p>
<p>ly  must include ro in spec</p>
<p class="last">if lr and roe then lr is used</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reg_g</strong> – a distortion function spec or just a number; if &gt;1 assets if &lt;1 a prob converted to quantile</li>
<li><strong>pricing_g</strong> – spec or CDistortion class or lr= or roe =; must have name= to define spec; if CDist that is
used</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.q">
<code class="descname">q</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.q" title="Permalink to this definition">¶</a></dt>
<dd><p>return a quantile using nearest methodl so result is in density_df index</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.quantile_function">
<code class="descname">quantile_function</code><span class="sig-paren">(</span><em>kind='nearest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.quantile_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.quantile_function" title="Permalink to this definition">¶</a></dt>
<dd><p>return an approximation to the quantile function</p>
<p>TODO sort out…this isn’t right</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kind</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.recommend_bucket">
<code class="descname">recommend_bucket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.recommend_bucket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.recommend_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>data to help estimate a good bucket size</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.report">
<code class="descname">report</code><span class="sig-paren">(</span><em>report_list='quick'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.report" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>report_list</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename=''</em>, <em>mode='a'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.save" title="Permalink to this definition">¶</a></dt>
<dd><p>persist to YAML in filename; if none save to user.yaml</p>
<p>TODO: update user list in Examples?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – </li>
<li><strong>mode</strong> – for file open</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.top_down">
<code class="descname">top_down</code><span class="sig-paren">(</span><em>distortions</em>, <em>A_or_p</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.top_down"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.top_down" title="Permalink to this definition">¶</a></dt>
<dd><p>DataFrama summary and nice plots showing marginal and average ROE, lr etc. as you write a layer from x to A
If A=0 A=q(log) is used</p>
<p>Not integrated into graphcis format (plot)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>distortions</strong> – list or dictionary of CDistortion objects, or a single CDist object</li>
<li><strong>A_or_p</strong> – if &lt;1 interpreted as a quantile, otherwise assets</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.trim_df">
<code class="descname">trim_df</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.trim_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.trim_df" title="Permalink to this definition">¶</a></dt>
<dd><p>trim out unwanted columns from density_df</p>
<p>epd used in graphics</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.uat">
<code class="descname">uat</code><span class="sig-paren">(</span><em>As=None, Ps=[0.98], LRs=[0.965], r0=0.03, verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.uat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.uat" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconcile apply_distortion(s) with price and calibrate</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>As</strong> – Asset levels</li>
<li><strong>Ps</strong> – probability levels used to determine asset levels using quantile function</li>
<li><strong>LRs</strong> – loss ratios used to determine profitability</li>
<li><strong>r0</strong> – r0 level for distortions</li>
<li><strong>verbose</strong> – controls level of output</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.uat_differential">
<code class="descname">uat_differential</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.uat_differential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.uat_differential" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the numerical and theoretical derivatives of exa agree for given line</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.uat_interpolation_functions">
<code class="descname">uat_interpolation_functions</code><span class="sig-paren">(</span><em>a0</em>, <em>e0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.uat_interpolation_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.uat_interpolation_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform quick audit of interpolation functions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a0</strong> – base assets</li>
<li><strong>e0</strong> – base epd</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>log2</em>, <em>bs</em>, <em>approx_freq_ge=100</em>, <em>approx_type='slognorm'</em>, <em>remove_fuzz=False</em>, <em>sev_calc='discrete'</em>, <em>discretization_calc='survival'</em>, <em>padding=1</em>, <em>tilt_amount=0</em>, <em>epds=None</em>, <em>trim_df=True</em>, <em>verbose=False</em>, <em>add_exa=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.update" title="Permalink to this definition">¶</a></dt>
<dd><p>create density_df, performs convolution. optionally adds additional information if <code class="docutils literal"><span class="pre">add_exa=True</span></code>
for allocation and priority analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>log2</strong> – </li>
<li><strong>bs</strong> – bucket size</li>
<li><strong>approx_freq_ge</strong> – use method of moments if frequency is larger than <code class="docutils literal"><span class="pre">approx_freq_ge</span></code></li>
<li><strong>approx_type</strong> – type of method of moments approx to use (slognorm or sgamma)</li>
<li><strong>remove_fuzz</strong> – remove machine noise elements from FFT</li>
<li><strong>sev_calc</strong> – how to calculate the severity, discrete (point masses as xs) or continuous (uniform between xs points)</li>
<li><strong>discretization_calc</strong> – survival or distribution (accurate on right or left tails)</li>
<li><strong>padding</strong> – for fft 1 = double, 2 = quadruple</li>
<li><strong>tilt_amount</strong> – for tiling methodology - see notes on density for suggested parameters</li>
<li><strong>epds</strong> – epd points for priority analysis; if None-&gt; sensible defaults</li>
<li><strong>trim_df</strong> – remove unnecessary columns from density_df before returning</li>
<li><strong>verbose</strong> – level of output</li>
<li><strong>add_exa</strong> – run add_exa to append additional allocation information needed for pricing</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.yaml">
<code class="descname">yaml</code><span class="sig-paren">(</span><em>stream=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>write object as YAML</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Portfolio Class</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="aggregate.html"
                        title="previous chapter">Distribution Classes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="distortion.html"
                        title="next chapter">Distortion Class</a></p>
  <h3>This Page</h3>
  <div>
    <a href="_sources/portfolio.rst.txt"
       rel="nofollow">Show Source</a>
  </div>
<div class="this-page-menu">
  <a href="/scipy/docs/scipy-docs/portfolio.rst.rst">Edit page</a>
</div>

        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2018, Stephen J. Mildenhall.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>