
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Portfolio Class &#8212; aggregate 0.9.40 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.40',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Distortion Class" href="distortion.html" />
    <link rel="prev" title="Aggregate Class" href="aggregate.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-aggregate.port">
<span id="portfolio-class"></span><h1>Portfolio Class<a class="headerlink" href="#module-aggregate.port" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>A Portfolio represents a collection of Aggregate objects. Applications include</p>
<ul class="simple">
<li>A book of insurance or reinsurance business</li>
</ul>
</div>
<div class="section" id="important-methods">
<h2>Important Methods<a class="headerlink" href="#important-methods" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="example-calls">
<h2>Example Calls<a class="headerlink" href="#example-calls" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="other-notes">
<h2>Other Notes<a class="headerlink" href="#other-notes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aggregate.port.Portfolio">
<em class="property">class </em><code class="descclassname">aggregate.port.</code><code class="descname">Portfolio</code><span class="sig-paren">(</span><em>name</em>, <em>spec_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>CPortfolio creates and manages a portfolio of CAgg risks.</p>
<dl class="method">
<dt id="aggregate.port.Portfolio.analysis_collateral">
<code class="descname">analysis_collateral</code><span class="sig-paren">(</span><em>line</em>, <em>c</em>, <em>a</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.analysis_collateral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.analysis_collateral" title="Permalink to this definition">¶</a></dt>
<dd><p>E(C(a,c)) expected value of C_line against not C with collateral c and assets a, c &lt;= a
:param debug:
:param line: line of business with collateral, analyzed against not line
:param c: collateral, c &lt;= a required; c=0 reproduces exa, c=a reproduces lev
:param a: assets, assumed less than the max loss (i.e. within the square)
:return:</p>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.analysis_priority">
<code class="descname">analysis_priority</code><span class="sig-paren">(</span><em>asset_spec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.analysis_priority"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.analysis_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Create priority analysis report
This can be called multiple times so keep as method
:param asset_spec: epd
:return:</p>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.apply_distortion">
<code class="descname">apply_distortion</code><span class="sig-paren">(</span><em>dist</em>, <em>axiter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.apply_distortion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.apply_distortion" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the distorion, make a copy of density_df and append various columns
Handy graphic of results
:param dist: CDistortion
:param axiter: axis iterator, if None no plots are returned
:return: density_df with extra columns appended</p>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.apply_distortions">
<code class="descname">apply_distortions</code><span class="sig-paren">(</span><em>dist_dict</em>, <em>As=None</em>, <em>Ps=None</em>, <em>num_plots=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.apply_distortions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.apply_distortions" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Apply a list of distortions, summarize pricing and produce graphical output</dt>
<dd>show s_ub &gt; S &gt; s_lb by jump</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dist_dict</strong> – dictionary of CDistortion objects</li>
<li><strong>As</strong> – input asset levels to consider OR</li>
<li><strong>Ps</strong> – input probs (near 1) converted to assets using self.q()</li>
<li><strong>num_plots</strong> – 0, 1 or 2</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.calibrate_distortion">
<code class="descname">calibrate_distortion</code><span class="sig-paren">(</span><em>name</em>, <em>r0=0.0</em>, <em>premium_target=0.0</em>, <em>roe=0.0</em>, <em>assets=0.0</em>, <em>p=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.calibrate_distortion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.calibrate_distortion" title="Permalink to this definition">¶</a></dt>
<dd><p>Find transform to hit a premium target given assets of a
this fills in the values in g_spec and returns params and diagnostics…so
you can use it either way…more convenient
:param name: name of distortion
:param r0:   fixed parameter if applicable
:param premium_target: target premium
:param roe:             or ROE
:param assets: asset level
:param p:
:return:</p>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.calibrate_distortions">
<code class="descname">calibrate_distortions</code><span class="sig-paren">(</span><em>LRs=None</em>, <em>ROEs=None</em>, <em>As=None</em>, <em>Ps=None</em>, <em>r0=0.03</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.calibrate_distortions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.calibrate_distortions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate assets a to loss ratios LRs and asset levels As (iterables)
ro for LY, it ro/(1+ro) corresponds to a minimum rate on line
:param LRs:  LR or ROEs given
:param ROEs: ROEs override LRs
:param As:  Assets or probs given
:param Ps: probability levels for quantiles
:param r0: for distortions that have a min ROL
:return:</p>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.collapse">
<code class="descname">collapse</code><span class="sig-paren">(</span><em>kind='slognorm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.collapse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.collapse" title="Permalink to this definition">¶</a></dt>
<dd><p>returns new CPortfolio with the fit</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kind</strong> – slognorm | sgamma</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.cumintegral">
<code class="descname">cumintegral</code><span class="sig-paren">(</span><em>v</em>, <em>bs_override=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.cumintegral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.cumintegral" title="Permalink to this definition">¶</a></dt>
<dd><p>cumulative integral of v with buckets size bs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>v</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>kind='slognorm'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a dictionary specification of the portfolio aggregate
if updated uses empirical moments, otherwise uses theoretic moments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kind</strong> – slognorm | sgamma</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aggregate.port.Portfolio.from_DataFrame">
<em class="property">static </em><code class="descname">from_DataFrame</code><span class="sig-paren">(</span><em>name</em>, <em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.from_DataFrame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.from_DataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>create portfolio from pandas dataframe
uses columns with appropriate names</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>df</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aggregate.port.Portfolio.from_Excel">
<em class="property">static </em><code class="descname">from_Excel</code><span class="sig-paren">(</span><em>name</em>, <em>ffn</em>, <em>sheet_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.from_Excel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.from_Excel" title="Permalink to this definition">¶</a></dt>
<dd><p>read in from Excel</p>
<p>works via a Pandas dataframe; kwargs passed through to pd.read_excel
drops all blank columns (mostly for auditing purposes)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ffn</strong> – full file name, including path</li>
<li><strong>sheet_name</strong> – </li>
<li><strong>kwargs</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.get_stat">
<code class="descname">get_stat</code><span class="sig-paren">(</span><em>line='total'</em>, <em>stat='EmpMean'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.get_stat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.get_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Other analysis suggests that iloc and iat are about same speed but slower than ix</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>line</strong> – </li>
<li><strong>stat</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.percentiles">
<code class="descname">percentiles</code><span class="sig-paren">(</span><em>pvalues=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.percentiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.percentiles" title="Permalink to this definition">¶</a></dt>
<dd><p>report on percentiles and large losses
uses interpolation, audit_df uses nearest</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Pvalues:</th><td class="field-body">optional vector of p values to use. If None sensible defaults provided</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">DataFrame of percentiles indexed by line and p</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>kind</em>, <em>line='all'</em>, <em>p=0.99</em>, <em>c=0</em>, <em>a=0</em>, <em>axiter=None</em>, <em>figsize=None</em>, <em>height=2</em>, <em>aspect=1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>kind = density
simple plotting of line density or not line density
input single line or list of lines
p underscore appended as appropriate</p>
<dl class="docutils">
<dt>kind = audit</dt>
<dd>Miscellaneous audit graphs</dd>
<dt>kind = priority</dt>
<dd>LEV EXA, E2Pri and combined plots by line</dd>
<dt>kind = quick</dt>
<dd>four bar charts of EL etc.</dd>
<dt>kind = collateral</dt>
<dd>plot to illustrate bivariate density of line vs not line with indicated asset a and capital c</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kind</strong> – </li>
<li><strong>line</strong> – </li>
<li><strong>p</strong> – for graphics audit controls loss scale</li>
<li><strong>c</strong> – </li>
<li><strong>a</strong> – </li>
<li><strong>axiter</strong> – </li>
<li><strong>figsize</strong> – </li>
<li><strong>height</strong> – </li>
<li><strong>aspect</strong> – </li>
<li><strong>kwargs</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.price">
<code class="descname">price</code><span class="sig-paren">(</span><em>reg_g</em>, <em>pricing_g=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.price"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.price" title="Permalink to this definition">¶</a></dt>
<dd><p>Price using regulatory and pricing g functions
i.e. compute E_price (X wedge E_reg(X) )
regulatory capital distortion is applied on unlimited basis
reg_g is number; CDistortion; spec { name = var|tvar|  ,  shape =p value in either case }
pricing_g is  { name = ph|wang and shape= or lr= or roe= }, if shape and lr or roe shape is
overwritten</p>
<p>ly  must include ro in spec</p>
<p>if lr and roe then lr is used</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reg_g</strong> – a distortion function spec or just a number; if &gt;1 assets if &lt;1 a prob converted to quantile</li>
<li><strong>pricing_g</strong> – spec or CDistortion class or lr= or roe =; must have name= to define spec; if CDist that is
used</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.q">
<code class="descname">q</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.q" title="Permalink to this definition">¶</a></dt>
<dd><p>return a quantile using nearest (i.e. will be in the index</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.quantile_function">
<code class="descname">quantile_function</code><span class="sig-paren">(</span><em>kind='nearest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.quantile_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.quantile_function" title="Permalink to this definition">¶</a></dt>
<dd><p>return an approximation to the quantile function</p>
<p>TODO sort out…this isn’t right</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kind</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.recommend_bucket">
<code class="descname">recommend_bucket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.recommend_bucket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.recommend_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>data to help estimate a good bucket size</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.report">
<code class="descname">report</code><span class="sig-paren">(</span><em>report_list='quick'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.report" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>report_list</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename=''</em>, <em>mode='a'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.save" title="Permalink to this definition">¶</a></dt>
<dd><p>persist to YAML in filename; if none save to user.yaml</p>
<p>TODO: update user list in Examples?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – </li>
<li><strong>mode</strong> – for file open</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.top_down">
<code class="descname">top_down</code><span class="sig-paren">(</span><em>distortions</em>, <em>A_or_p</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.top_down"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.top_down" title="Permalink to this definition">¶</a></dt>
<dd><p>DataFrama summary and nice plots showing marginal and average ROE, lr etc. as you write a layer from x to A
If A=0 A=q(p) is used</p>
<p>Not integrated into graphcis format (plot)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>distortions</strong> – list or dictionary of CDistortion objects, or a single CDist object</li>
<li><strong>A_or_p</strong> – if &lt;1 interpreted as a quantile, otherwise assets</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.trim_df">
<code class="descname">trim_df</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.trim_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.trim_df" title="Permalink to this definition">¶</a></dt>
<dd><p>trim out unwanted columns from density_df</p>
<p>epd used in graphics</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.uat">
<code class="descname">uat</code><span class="sig-paren">(</span><em>As=None, Ps=[0.98], LRs=[0.965], r0=0.03, verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.uat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.uat" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconcile apply_distortion(s) with price and calibrate</p>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.uat_differential">
<code class="descname">uat_differential</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.uat_differential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.uat_differential" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the numerical and theoretical derivatives of exa agree for given line</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.uat_interpolation_functions">
<code class="descname">uat_interpolation_functions</code><span class="sig-paren">(</span><em>a0</em>, <em>e0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.uat_interpolation_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.uat_interpolation_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform quick audit of interpolation functions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a0</strong> – base assets</li>
<li><strong>e0</strong> – base epd</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>log2</em>, <em>bs</em>, <em>approx_freq_ge=100</em>, <em>approx_type='slognorm'</em>, <em>remove_fuzz=False</em>, <em>sev_calc='discrete'</em>, <em>discretization_calc='survival'</em>, <em>padding=1</em>, <em>tilt_amount=0</em>, <em>epds=None</em>, <em>trim_df=True</em>, <em>verbose=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.update" title="Permalink to this definition">¶</a></dt>
<dd><p>interp guesses exa etc. for small losses, but that doesn’t work</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>discretization_calc</strong> – </li>
<li><strong>verbose</strong> – </li>
<li><strong>log2</strong> – </li>
<li><strong>bs</strong> – bucket size</li>
<li><strong>approx_freq_ge</strong> – </li>
<li><strong>approx_type</strong> – </li>
<li><strong>remove_fuzz</strong> – </li>
<li><strong>sev_calc</strong> – how to calculate the severity gradient | rescale</li>
<li><strong>padding</strong> – for fft 1 = double, 2 = quadruple</li>
<li><strong>tilt_amount</strong> – for tiling methodology - see notes on density for suggested parameters</li>
<li><strong>epds</strong> – epd points for priority analysis; if None-&gt; sensible defaults</li>
<li><strong>trim_df</strong> – remove unnecessary columns from density_df before returning</li>
<li><strong>kwargs</strong> – allows you to pass in other crap which is ignored, useful for YAML persistence</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aggregate.port.Portfolio.yaml">
<code class="descname">yaml</code><span class="sig-paren">(</span><em>stream=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aggregate/port.html#Portfolio.yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aggregate.port.Portfolio.yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>write object as YAML</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.PNG" alt="Logo"/>
    
    <h1 class="logo logo-name">aggregate</h1>
    
  </a>
</p>



<p class="blurb">aggregate is a Python package providing fast, accurate, and expressive datastructures designed to make working with probability distributions easy and intuitive.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=mynl&repo=aggregate&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to aggregate</a></li>
<li class="toctree-l1"><a class="reference internal" href="histapp.html">History and Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="prob.html">Probability and Risk Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Development Outline</a></li>
<li class="toctree-l1"><a class="reference internal" href="severity.html">Severity Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="aggregate.html">Aggregate Class</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Portfolio Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="distortion.html">Distortion Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="underwriter.html">Underwriter Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters Module</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Stephen J. Mildenhall.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/portfolio.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/mynl/aggregate" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>